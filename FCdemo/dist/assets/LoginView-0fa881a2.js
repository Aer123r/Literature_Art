import{d as L,r as _,z as N,o as i,c as l,b as o,a,u as t,w as v,i as R,y as U,g as k,t as j,p as z,j as D,f as E,_ as F}from"./index-465e1cad.js";import{l as A,a as G}from"./login_register-5ed45731.js";import"./axios-bff3f665.js";const d=c=>(z("data-v-ff81dd98"),c=c(),D(),c),H={class:"back"},J={class:"box_card_left"},K=d(()=>o("div",{class:"back_image"},null,-1)),M={class:"box-card_right"},O={class:"right_inner_box"},P=d(()=>o("h2",{class:"login_title"},"用户登录",-1)),Q={key:0,class:"method1"},T={key:1,class:"method2"},W={class:"phone_number_box"},X=d(()=>o("div",{class:"input_label_text"},"手机号",-1)),Y={key:0,class:"password_box"},Z=d(()=>o("div",{class:"input_label_text"},"密码",-1)),ee={key:1,class:"verification_code_box"},oe=d(()=>o("div",{class:"input_label_text"},"验证码",-1)),te={class:"send_code_box"},se={key:1,class:"send_code_button2"},ne=d(()=>o("span",null,"登录",-1)),ie=[ne],le={class:"save_login_set"},ae=["checked"],de=d(()=>o("div",{class:"save_login_set_text"},"保存登录设置",-1)),_e=L({__name:"LoginView",setup(c){const f=U();let r=_(0);function x(){r.value=(r.value+1)%2}function V(){f.commit("submit_login_form",s.value),console.log(s.value,"上传")}let m=_(!0);function y(){m.value=!m.value,m.value==!0&&V()}const w=E();let s=_({phone_number:f.state.login_form.phone_number,password:f.state.login_form.password,verification_code:""});const C=_(s.value),I=N({phone_number:[{required:!0,message:"手机号不能为空",trigger:"blur"},{min:6,max:12,message:"手机号长度在6-12位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6-16位",trigger:"blur"}],verification_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:8,message:"验证码长度不对",trigger:"blur"}]}),S=()=>{A(s.value).then(u=>{console.log(u),window.sessionStorage.setItem("token",u.data.token),alert("登录成功！"),w.push({path:"/home"})})};let g=_(!1),p=_(5);function q(){console.log("button_code"),p.value=5,g.value=!0;let u=setInterval(()=>{p.value==0&&(g.value=!1,window.clearInterval(u)),p.value--},1e3)}function $(){w.push("/find")}return(u,e)=>{const b=k("el-input"),h=k("el-form-item"),B=k("el-form");return i(),l("div",H,[o("div",J,[a(G),K]),o("div",M,[o("div",O,[P,o("div",{class:"change_login_method",onClick:e[0]||(e[0]=n=>x())},[t(r)==0?(i(),l("div",Q,"使用验证码登录")):(i(),l("div",T,"使用密码登录"))]),a(B,{ref_key:"formRef",ref:C,model:t(s),"status-icon":"",rules:I,"label-width":"0px",class:"demo-ruleForm"},{default:v(()=>[o("div",W,[X,a(h,{label:"",required:"",prop:"phone_number"},{default:v(()=>[a(b,{modelValue:t(s).phone_number,"onUpdate:modelValue":e[1]||(e[1]=n=>t(s).phone_number=n)},null,8,["modelValue"])]),_:1})]),t(r)==0?(i(),l("div",Y,[Z,a(h,{label:"",required:"",prop:"password"},{default:v(()=>[a(b,{modelValue:t(s).password,"onUpdate:modelValue":e[2]||(e[2]=n=>t(s).password=n),type:"password"},null,8,["modelValue"])]),_:1})])):(i(),l("div",ee,[oe,o("div",te,[t(g)==!1?(i(),l("div",{key:0,class:"send_code_button",onClick:e[3]||(e[3]=n=>q())},"获取验证码")):(i(),l("div",se,j(t(p))+"秒后再次获取",1))]),a(h,{label:"",required:"",prop:"verification_code"},{default:v(()=>[a(b,{modelValue:t(s).verification_code,"onUpdate:modelValue":e[4]||(e[4]=n=>t(s).verification_code=n),type:"verification_code"},null,8,["modelValue"])]),_:1})]))]),_:1},8,["model","rules"]),o("div",{class:"onsubmit",onClick:e[5]||(e[5]=n=>S())},ie),o("div",le,[o("input",{type:"checkbox",name:"保存登录设置",id:"",checked:t(m),onClick:e[6]||(e[6]=n=>y())},null,8,ae),de]),t(r)==0?(i(),l("div",{key:0,class:"forget_password",onClick:e[7]||(e[7]=n=>$())},"忘记密码?")):R("",!0)])])])}}});const me=F(_e,[["__scopeId","data-v-ff81dd98"]]);export{me as default};
